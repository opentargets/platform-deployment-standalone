ARG OTOPS_PROFILE_ELASTIC_SEARCH_UID
ARG OTOPS_PROFILE_ELASTIC_SEARCH_GID
ARG OTOPS_PROFILE_ELASTIC_SEARCH_DOCKER_IMAGE_NAME=openproject/opensearch
ARG OTOPS_PROFILE_ELASTIC_SEARCH_DOCKER_IMAGE_TAG=2.10.0

FROM $OTOPS_PROFILE_ELASTIC_SEARCH_DOCKER_IMAGE_NAME:$OTOPS_PROFILE_ELASTIC_SEARCH_DOCKER_IMAGE_TAG
USER root
RUN groupmod --gid $OTOPS_PROFILE_ELASTIC_SEARCH_UID opensearch; \
  usermod  --uid $OTOPS_PROFILE_ELASTIC_SEARCH_UID opensearch; \
  chown -R opensearch:opensearch /usr/share/opensearch
USER opensearch
